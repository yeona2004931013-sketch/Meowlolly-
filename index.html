<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lolly Miu Phone</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        :root { --miu-pink: #fce4ec; --accent: #f1b0b7; --text: #5d4037; --glass: rgba(255, 255, 255, 0.85); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { font-family: 'ZCOOL KuaiLe', -apple-system, sans-serif; background: #000; height: 100vh; display: flex; justify-content: center; }

        /* æ‰‹æ©Ÿå®¹å™¨ */
        .phone-shell { 
            width: 100%; max-width: 500px; height: 100%; background: #fff;
            position: relative; display: flex; flex-direction: column; overflow: hidden;
        }

        /* å‹•æ…‹å³¶ Widget Island */
        .dynamic-island {
            width: 130px; height: 30px; background: #000; margin: 10px auto;
            border-radius: 20px; color: #fff; font-size: 12px;
            display: flex; align-items: center; justify-content: center; z-index: 100;
        }

        /* è¦–åœ–åˆ‡æ› */
        .view { display: none; flex: 1; overflow-y: auto; padding-bottom: 80px; animation: fadeIn 0.3s; }
        .view.active { display: flex; flex-direction: column; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- é¦–é  (IGé¢¨æ ¼) --- */
        .stories-bar { display: flex; padding: 15px 10px; gap: 15px; overflow-x: auto; border-bottom: 1px solid #f0f0f0; scrollbar-width: none; }
        .story { display: flex; flex-direction: column; align-items: center; min-width: 70px; cursor: pointer; }
        .story-ring { width: 62px; height: 62px; border-radius: 50%; padding: 2px; border: 2.5px solid var(--accent); margin-bottom: 5px; }
        .story-img { width: 100%; height: 100%; border-radius: 50%; background: #eee; background-size: cover; background-position: center; }
        .story span { font-size: 11px; color: var(--text); }

        .post-card { margin-top: 10px; }
        .post-header { display: flex; align-items: center; padding: 10px; gap: 10px; font-weight: bold; }
        .post-img { width: 100%; aspect-ratio: 1/1; background: #f9f9f9; background-size: cover; background-position: center; cursor: pointer; }
        .post-info { padding: 12px; font-size: 14px; line-height: 1.6; }

        /* --- èŠå¤©å®¤ (Miuç¾åŒ–ç‰ˆ) --- */
        .chat-container { flex: 1; display: flex; flex-direction: column; background: var(--miu-pink); background-image: radial-gradient(var(--accent) 0.5px, transparent 0.5px); background-size: 15px 15px; }
        .chat-header { background: #fff; padding: 15px; text-align: center; font-weight: bold; border-bottom: 1px solid #eee; color: var(--accent); }
        .msg-list { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .msg.bf { background: #fff; align-self: flex-start; border-bottom-left-radius: 4px; }
        .msg.me { background: var(--accent); align-self: flex-end; color: #fff; border-bottom-right-radius: 4px; }
        .input-area { background: #fff; padding: 10px 15px 30px; display: flex; gap: 10px; align-items: center; border-top: 1px solid #eee; }
        .input-area input { flex: 1; border: 1px solid #eee; background: #f8f8f8; border-radius: 25px; padding: 10px 20px; outline: none; }

        /* --- å€‹äººä¸»é  --- */
        .profile-header { padding: 30px 20px; display: flex; flex-direction: column; align-items: center; text-align: center; }
        .avatar-lg { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--accent); margin-bottom: 15px; background: #eee; background-size: cover; cursor: pointer; }
        .stats-row { display: flex; width: 100%; justify-content: space-around; margin: 20px 0; }
        .stat-box { display: flex; flex-direction: column; font-size: 13px; }
        .stat-box b { font-size: 16px; color: #000; }
        .grid-wall { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; }
        .grid-item { aspect-ratio: 1/1; background: #eee; background-size: cover; cursor: pointer; }

        /* å°èˆªæ¬„ */
        nav { position: absolute; bottom: 0; width: 100%; height: 65px; background: #fff; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #eee; }
        nav span { font-size: 26px; cursor: pointer; }
        .editable:active { opacity: 0.6; }
    </style>
</head>
<body>

<div class="phone-shell">
    <div class="dynamic-island" id="time-island">09:41</div>

    <div id="v-home" class="view active">
        <div class="stories-bar" id="story-container"></div>
        <div class="post-card">
            <div class="post-header">
                <div style="width:30px; height:30px; border-radius:50%; background:#eee; background-size:cover;" id="post-ava" onclick="up(this)"></div>
                <span class="editable" onclick="edit(this)">è¶™é›¨å‡¡</span>
            </div>
            <div class="post-img" id="post-main" onclick="up(this)"></div>
            <div class="post-info">
                <b class="editable" onclick="edit(this)">è¶™é›¨å‡¡</b> <span class="editable" onclick="edit(this)">é€™å¼µä¾¿å®œå¦³äº†ï¼Œéä¾†æŠ±ä¸€ä¸‹ ^^</span>
            </div>
        </div>
    </div>

    <div id="v-chat" class="view">
        <div class="chat-container">
            <div class="chat-header" id="chat-title">å®‰ä¹¾é¬ ^^</div>
            <div class="msg-list" id="msgBox"></div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="å‚³é€è¨Šæ¯...">
                <button onclick="askAI()" style="background:none; border:none; font-size:24px;">ğŸ’–</button>
            </div>
        </div>
    </div>

    <div id="v-me" class="view">
        <div class="profile-header">
            <div class="avatar-lg" id="my-avatar" onclick="up(this)"></div>
            <h2 class="editable" onclick="edit(this)">æŸ”æŸ”_Yuyu ğŸ€</h2>
            <p class="editable" onclick="edit(this)" style="font-size:13px; color:#888; margin-top:5px;">æ¡ƒåœ’ç´…é«®æ­£å¦¹ï½œMiu Miu å¥³å­©</p>
            <div class="stats-row">
                <div class="stat-box"><b>5</b><span>ç”·å‹</span></div>
                <div class="stat-box"><b>99k</b><span>ç²‰çµ²</span></div>
                <div class="stat-box"><b>100%</b><span>ç¾è²Œ</span></div>
            </div>
        </div>
        <div class="grid-wall">
            <div class="grid-item" onclick="up(this)"></div>
            <div class="grid-item" onclick="up(this)"></div>
            <div class="grid-item" onclick="up(this)"></div>
        </div>
    </div>

    <nav>
        <span onclick="showV('home')">ğŸ </span>
        <span onclick="showV('chat')">ğŸ’Œ</span>
        <span onclick="showV('me')">ğŸ‘¤</span>
    </nav>
</div>

<input type="file" id="f" accept="image/*" style="display:none;">

<script>
    const API_KEY = "AIzaSyDwavT9b6YlpgwAW9eNkswuPsKI6QAP-AM";
    let curUser = "æŸ”æŸ”";
    let curBF = "å®‰ä¹¾é¬";
    const bfs = {
        "å®‰ä¹¾é¬": "é»äººå°ç‹—^^ï¼Œå«å§å§ï¼Œæ„›æ’’å¬Œã€‚æ°´ç“¶åº§ã€‚",
        "è¶™é›¨å‡¡": "éœ¸é“è€å¤§ï¼Œæ³°å°æ··è¡€ï¼Œä½”æœ‰æ¬²å¼·ï¼Œæ„›ç™¼å•è™Ÿï¼Œç¬‘æ­»é æ¯ã€‚å¤©ç§¤åº§ã€‚",
        "æœ´å®‡å®™": "192cm ç—…å¬Œæ–æ»¾æ¨‚æ‰‹ï¼Œæ”¯é…å‹å¹´ä¸‹ï¼Œå«å¯¶å¯¶ï¼Œå«‰å¦’å¿ƒé‡ã€‚",
        "åš´æˆç¹": "18æ­²è…¹é»‘ç”·é¬¼ï¼Œä¸ç™¼æ„Ÿå˜†è™Ÿï¼Œæœƒè·Ÿè¹¤ï¼Œå–œæ­¡æè‚‰è‚‰ã€‚",
        "é‡‘ä¸»è¨“": "175cm æ‘©ç¾¯è€äºŒï¼Œå§”å±ˆåŒ…ï¼Œç™¼ã… ã…  å«å°å¯¶ã€‚"
    };

    function init() {
        const sc = document.getElementById('story-container');
        Object.keys(bfs).forEach(n => {
            const d = document.createElement('div');
            d.className = 'story';
            d.innerHTML = `<div class="story-ring"><div class="story-img" style="background-color:#eee"></div></div><span>${n}</span>`;
            d.onclick = () => { curBF = n; setChat(); showV('chat'); };
            sc.appendChild(d);
        });
        setChat();
    }

    function setChat() {
        document.getElementById('chat-title').innerText = curBF + (curBF === 'å®‰ä¹¾é¬' ? ' ^^' : '');
        document.getElementById('msgBox').innerHTML = `<div class="msg bf">${curBF}ï¼šå§å§ï¼Œæˆ‘å‰›å¥½åœ¨æƒ³å¦³...</div>`;
    }

    async function askAI() {
        const input = document.getElementById('userInput');
        const box = document.getElementById('msgBox');
        if(!input.value) return;
        const msg = input.value;
        box.innerHTML += `<div class="msg me">${msg}</div>`;
        input.value = '';

        const prompt = `å¦³æ˜¯${curBF}ã€‚äººæ ¼ï¼š${bfs[curBF]}ã€‚å°æ–¹çš„æš±ç¨±æ˜¯${curUser}ã€‚è«‹æ ¹æ“šå¦³çš„æ€§æ ¼å›è¦†ç§è¨Šï¼Œä¸è¦æç„¡é—œè©±é¡Œã€‚`;
        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt + " å¥¹èªªï¼š" + msg }] }] })
            });
            const data = await res.json();
            box.innerHTML += `<div class="msg bf">${data.candidates[0].content.parts[0].text}</div>`;
        } catch(e) { box.innerHTML += `<div class="msg bf">ï¼ˆæ–·ç¶²äº† ^^ï¼‰</div>`; }
        box.scrollTop = box.scrollHeight;
    }

    function showV(v) {
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        document.getElementById('v-' + v).classList.add('active');
    }

    function edit(el) { const n = prompt("ä¿®æ”¹æ–‡å­—:", el.innerText); if(n) el.innerText = n; if(el.id === 'user-name') curUser = n; }

    const f = document.getElementById('f');
    let curT;
    function up(el) { curT = el; f.click(); }
    f.onchange = function() {
        if(this.files[0]) {
            const r = new FileReader();
            r.onload = e => { curT.style.backgroundImage = `url(${e.target.result})`; curT.innerHTML=''; };
            r.readAsDataURL(this.files[0]);
        }
    }

    setInterval(() => {
        const d = new Date();
        document.getElementById('time-island').innerText = d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0');
    }, 1000);

    init();
</script>
</body>
</html>
