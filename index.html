<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lolly Pro</title>
    <style>
        :root { --accent: #f1b0b7; --bg: #fff5f6; --text: #5d4037; --card: rgba(255,255,255,0.9); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { font-family: -apple-system, sans-serif; background: #000; height: 100vh; display: flex; justify-content: center; }

        /* æ‰‹æ©Ÿå®¹å™¨ï¼šå¼·åˆ¶æ¯”ä¾‹èˆ‡åœ“è§’ */
        .app-container { 
            width: 100%; max-width: 500px; height: 100%; background: var(--bg);
            position: relative; display: flex; flex-direction: column; overflow: hidden;
        }

        /* é ‚éƒ¨å°èˆªï¼šç”·å‹é™å‹•å€ */
        .header-stories {
            background: #fff; padding: 15px 10px 10px; border-bottom: 1px solid #eee;
            display: flex; gap: 15px; overflow-x: auto; scrollbar-width: none;
        }
        .story-node { display: flex; flex-direction: column; align-items: center; min-width: 65px; cursor: pointer; }
        .ring { 
            width: 60px; height: 60px; border-radius: 50%; border: 2.5px solid var(--accent);
            padding: 2px; margin-bottom: 4px; transition: 0.3s;
        }
        .ring img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; background: #eee; }
        .story-node.active .ring { background: var(--accent); transform: scale(1.1); }
        .story-node span { font-size: 11px; font-weight: 500; color: #444; }

        /* èŠå¤©å€åŸŸ */
        .chat-main { 
            flex: 1; overflow-y: auto; padding: 20px 15px; 
            display: flex; flex-direction: column; gap: 12px;
            background-image: radial-gradient(#f1b0b7 0.5px, transparent 0.5px);
            background-size: 20px 20px;
        }
        .bubble { max-width: 75%; padding: 12px 16px; border-radius: 20px; font-size: 14px; line-height: 1.5; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .bubble.bf { background: #fff; align-self: flex-start; border-bottom-left-radius: 4px; color: #333; }
        .bubble.me { background: var(--accent); align-self: flex-end; border-bottom-right-radius: 4px; color: #fff; }

        /* è¼¸å…¥æ¡†ï¼šIG è† å›Šæ¨£å¼ */
        .footer-input { 
            background: #fff; padding: 10px 15px 30px; border-top: 1px solid #eee;
            display: flex; align-items: center; gap: 10px;
        }
        .input-box { 
            flex: 1; background: #f8f8f8; border: 1px solid #eee; 
            border-radius: 25px; padding: 10px 20px; outline: none; font-size: 14px;
        }
        .send-btn { color: var(--accent); font-size: 24px; cursor: pointer; border: none; background: none; }

        /* å€‹äººä¸»é è¦–åœ– */
        .view { display: none; height: 100%; overflow-y: auto; }
        .view.active { display: flex; flex-direction: column; }
        
        /* åº•éƒ¨ä¸»é¸å–® */
        nav {
            position: absolute; bottom: 0; width: 100%; height: 65px;
            background: rgba(255,255,255,0.98); display: flex; 
            justify-content: space-around; align-items: center; border-top: 1px solid #eee;
        }
        nav span { font-size: 26px; cursor: pointer; transition: 0.2s; }

        /* éš±è—æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="v-chat" class="view active">
        <div class="header-stories" id="storyList"></div>
        <div class="chat-main" id="chatBox"></div>
        <div class="footer-input">
            <input type="text" id="userInput" class="input-box" placeholder="ç™¼é€è¨Šæ¯...">
            <button onclick="askAI()" class="send-btn">ğŸ’–</button>
        </div>
    </div>

    <div id="v-me" class="view" style="padding: 40px 20px;">
        <div style="display:flex; align-items:center; gap:25px; margin-bottom:20px;">
            <div style="width:80px; height:80px; border-radius:50%; background:#eee; background-size:cover;" id="myAva" onclick="up(this)"></div>
            <div style="flex:1;">
                <h2 onclick="edit(this)" style="font-size:18px;">æŸ”æŸ”_Yuyu ğŸ€</h2>
                <p style="font-size:13px; color:#888; margin-top:5px;">æ¡ƒåœ’ç´…é«®æ­£å¦¹ï½œMiu Miu å¥³å­©</p>
            </div>
        </div>
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:2px;" id="wall">
            <div onclick="up(this)" style="aspect-ratio:1/1; background:#f0f0f0; background-size:cover;"></div>
            <div onclick="up(this)" style="aspect-ratio:1/1; background:#f0f0f0; background-size:cover;"></div>
            <div onclick="up(this)" style="aspect-ratio:1/1; background:#f0f0f0; background-size:cover;"></div>
        </div>
    </div>

    <nav>
        <span onclick="showV('chat')">ğŸ’Œ</span>
        <span onclick="showV('me')">ğŸ‘¤</span>
    </nav>
</div>

<input type="file" id="f" accept="image/*" style="display:none;">

<script>
    const API_KEY = "AIzaSyDwavT9b6YlpgwAW9eNkswuPsKI6QAP-AM";
    const bfs = {
        "å®‰ä¹¾é¬": "é»äººå°ç‹—^^ï¼Œå«å§å§ï¼Œæ°´ç“¶åº§ï¼Œæ´»æ½‘é»äºº",
        "è¶™é›¨å‡¡": "éœ¸é“è€å¤§ï¼Œæ³°å°æ··è¡€ï¼Œä½”æœ‰æ¬²å¼·ï¼Œæ„›èªªç¬‘æ­»ã€é æ¯ï¼Œä¸è½è©±ç™¼ï¼Ÿ",
        "æœ´å®‡å®™": "192cm ç—…å¬Œæ–æ»¾ï¼Œæ”¯é…å‹å¹´ä¸‹ï¼Œå«å¯¶å¯¶ï¼Œæœƒå«‰å¦’ç™¼ç˜‹",
        "åš´æˆç¹": "18æ­²è…¹é»‘ç”·é¬¼ï¼Œä¸ç™¼æ„Ÿå˜†è™Ÿï¼Œæœƒè·Ÿè¹¤ï¼Œå–œæ­¡æè‚‰è‚‰",
        "é‡‘ä¸»è¨“": "175cm æ‘©ç¾¯è€äºŒï¼Œå§”å±ˆåŒ…ï¼Œç™¼ã… ã…  å«å°å¯¶"
    };
    let curBF = "å®‰ä¹¾é¬";

    function init() {
        const list = document.getElementById('storyList');
        Object.keys(bfs).forEach(name => {
            const div = document.createElement('div');
            div.className = `story-node ${name === curBF ? 'active' : ''}`;
            div.innerHTML = `<div class="ring"><img src="" alt=""></div><span>${name}</span>`;
            div.onclick = () => {
                curBF = name;
                document.querySelectorAll('.story-node').forEach(n => n.classList.remove('active'));
                div.classList.add('active');
                setChat();
            };
            list.appendChild(div);
        });
        setChat();
    }

    function setChat() {
        document.getElementById('chatBox').innerHTML = `<div class="bubble bf">${curBF}ï¼šå§å§ï¼Œæˆ‘æ­£åœ¨æƒ³å¦³...</div>`;
    }

    async function askAI() {
        const input = document.getElementById('userInput');
        const box = document.getElementById('chatBox');
        if(!input.value) return;
        const msg = input.value;
        box.innerHTML += `<div class="bubble me">${msg}</div>`;
        input.value = '';

        const prompt = `å¦³æ˜¯${curBF}ã€‚æ€§æ ¼ï¼š${bfs[curBF]}ã€‚å°æ–¹çš„æš±ç¨±æ˜¯æŸ”æŸ”ã€‚è«‹æ ¹æ“šè¨­å®šå›è¦†ç§è¨Šã€‚å¥¹èªªï¼š${msg}`;
        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await res.json();
            box.innerHTML += `<div class="bubble bf">${data.candidates[0].content.parts[0].text}</div>`;
        } catch(e) { box.innerHTML += `<div class="bubble bf">è¨Šè™Ÿå¼± ^^</div>`; }
        box.scrollTop = box.scrollHeight;
    }

    function showV(v) {
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        document.getElementById('v-' + v).classList.add('active');
    }

    function edit(el) { const n = prompt("ä¿®æ”¹æ–‡å­—:", el.innerText); if(n) el.innerText = n; }

    const f = document.getElementById('f');
    let curT;
    function up(el) { curT = el; f.click(); }
    f.onchange = function() {
        if(this.files[0]) {
            const r = new FileReader();
            r.onload = e => { curT.style.backgroundImage = `url(${e.target.result})`; curT.innerHTML=''; };
            r.readAsDataURL(this.files[0]);
        }
    }

    init();
</script>
</body>
</html>
