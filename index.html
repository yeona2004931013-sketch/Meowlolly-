<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lolly IG-Pro</title>
    <style>
        :root { --miu-pink: #fce4ec; --accent: #f1b0b7; --text: #5d4037; --glass: rgba(255, 255, 255, 0.8); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #fff; overflow: hidden; color: var(--text); }

        /* æ‰‹æ©Ÿå¤–æ®¼æ„Ÿ */
        .phone-container { width: 100vw; height: 100vh; position: relative; display: flex; flex-direction: column; background: #fff; }

        /* ç‹€æ…‹æ¬„ */
        .status-bar { height: 44px; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; font-size: 14px; font-weight: 600; background: #fff; z-index: 100; }

        /* è¦–åœ–å€åŸŸ */
        .view { display: none; flex: 1; overflow-y: auto; padding-bottom: 80px; }
        .view.active { display: block; }

        /* é¦–é å‹•æ…‹ç‰† (IGé¢¨æ ¼) */
        .stories { display: flex; padding: 10px; gap: 15px; overflow-x: auto; border-bottom: 1px solid #efefef; scrollbar-width: none; }
        .story { display: flex; flex-direction: column; align-items: center; min-width: 65px; }
        .story-ring { width: 60px; height: 60px; border-radius: 50%; padding: 2px; border: 2px solid var(--accent); margin-bottom: 5px; cursor: pointer; }
        .story-img { width: 100%; height: 100%; border-radius: 50%; background: #eee; background-size: cover; }
        .story span { font-size: 10px; color: #262626; }

        .post-card { margin-bottom: 20px; border-bottom: 1px solid #efefef; }
        .post-header { display: flex; align-items: center; padding: 10px; gap: 10px; }
        .post-avatar { width: 32px; height: 32px; border-radius: 50%; background: #eee; background-size: cover; }
        .post-img { width: 100%; aspect-ratio: 1/1; background: #fafafa; background-size: cover; background-position: center; cursor: pointer; }
        .post-actions { padding: 10px; font-size: 20px; display: flex; gap: 15px; }

        /* èŠå¤©å®¤ç¾åŒ– */
        .chat-view { display: flex; flex-direction: column; height: 100%; background: var(--miu-pink); background-image: radial-gradient(var(--accent) 0.5px, transparent 0.5px); background-size: 15px 15px; }
        .chat-header { background: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #efefef; font-weight: bold; }
        .msg-list { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 8px; }
        .msg { max-width: 75%; padding: 10px 16px; border-radius: 22px; font-size: 14px; line-height: 1.4; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .msg.bf { background: #fff; align-self: flex-start; border-bottom-left-radius: 4px; color: #262626; }
        .msg.me { background: var(--accent); align-self: flex-end; border-bottom-right-radius: 4px; color: #fff; }
        .input-bar { background: #fff; padding: 10px 15px; display: flex; align-items: center; gap: 10px; border-top: 1px solid #efefef; margin-bottom: 70px; }
        #userInput { flex: 1; border: 1px solid #dbdbdb; border-radius: 20px; padding: 8px 15px; outline: none; }

        /* å€‹äººé ç¾åŒ– */
        .profile-top { padding: 20px; display: flex; align-items: center; gap: 30px; }
        .profile-avatar { width: 80px; height: 80px; border-radius: 50%; border: 1px solid #dbdbdb; background: #eee; background-size: cover; cursor: pointer; }
        .stat-item { text-align: center; flex: 1; }
        .stat-num { font-weight: bold; font-size: 16px; }
        .stat-label { font-size: 12px; color: #8e8e8e; }
        .edit-btn { margin: 10px 20px; padding: 5px; border: 1px solid #dbdbdb; border-radius: 4px; text-align: center; font-size: 14px; font-weight: 600; cursor: pointer; }

        /* å°èˆªæ¬„ */
        nav { position: absolute; bottom: 0; width: 100%; height: 50px; background: #fff; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #efefef; z-index: 100; }
        nav span { font-size: 24px; cursor: pointer; transition: 0.2s; }
        nav span:active { opacity: 0.5; }

        .editable:active { background: #fafafa; }
    </style>
</head>
<body>

<div class="phone-container">
    <div class="status-bar">
        <span id="st-time">09:41</span>
        <span>â˜ï¸ ğŸ“¶ ğŸ”‹</span>
    </div>

    <div id="view-home" class="view active">
        <div class="stories" id="story-list"></div>
        <div class="post-card">
            <div class="post-header">
                <div class="post-avatar" id="post-ava" onclick="up(this)"></div>
                <div class="stat-num editable" onclick="edit(this)" style="font-size:14px;">è¶™é›¨å‡¡ (è€å¤§)</div>
            </div>
            <div class="post-img" id="post-main" onclick="up(this)"></div>
            <div class="post-actions"><span>â¤ï¸</span> <span>ğŸ’¬</span> <span>âœˆï¸</span></div>
            <div style="padding:0 10px 10px;"><b class="editable" onclick="edit(this)">è¶™é›¨å‡¡</b> <span class="editable" onclick="edit(this)">é€™å¼µçœŸçš„ä¾¿å®œå¦³äº†ï¼Œéä¾†ã€‚</span></div>
        </div>
    </div>

    <div id="view-chat" class="view chat-view">
        <div class="chat-header" id="chat-with" onclick="edit(this)">å®‰ä¹¾é¬ ^^</div>
        <div class="msg-list" id="msgBox"></div>
        <div class="input-bar">
            <input type="text" id="userInput" placeholder="å‚³é€è¨Šæ¯...">
            <button onclick="askAI()" style="background:none; border:none; font-size:22px;">ğŸ’–</button>
        </div>
    </div>

    <div id="view-profile" class="view">
        <div class="profile-top">
            <div class="profile-avatar" id="prof-ava" onclick="up(this)"></div>
            <div class="stat-item"><div class="stat-num">5</div><div class="stat-label">ç”·å‹</div></div>
            <div class="stat-item"><div class="stat-num">99.9k</div><div class="stat-label">ç²‰çµ²</div></div>
            <div class="stat-item"><div class="stat-num">520</div><div class="stat-label">è¿½è¹¤ä¸­</div></div>
        </div>
        <div style="padding:0 20px;">
            <div class="stat-num editable" onclick="edit(this)" id="user-name">æŸ”æŸ”_Yuyu ğŸ€</div>
            <div class="editable" onclick="edit(this)" style="font-size:14px; color:#262626; margin-top:5px;">æ¡ƒåœ’ç´…é«®æ­£å¦¹ï½œMiu Miu å¥³å­©<br>é€™æ˜¯æˆ‘å’Œäº”ä½ç”·å‹çš„ç§˜å¯†ç©ºé–“ âœ¨</div>
        </div>
        <div class="edit-btn" onclick="upBg()">æ›´æ›æ‰‹æ©ŸèƒŒæ™¯</div>
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:2px; margin-top:20px;" id="grid-wall">
             <div onclick="up(this)" style="aspect-ratio:1/1; background:#fafafa; background-size:cover;"></div>
             <div onclick="up(this)" style="aspect-ratio:1/1; background:#fafafa; background-size:cover;"></div>
             <div onclick="up(this)" style="aspect-ratio:1/1; background:#fafafa; background-size:cover;"></div>
        </div>
    </div>

    <nav>
        <span onclick="showV('home')">ğŸ </span>
        <span onclick="showV('chat')">ğŸ’Œ</span>
        <span onclick="showV('profile')">ğŸ‘¤</span>
    </nav>
</div>

<input type="file" id="f" accept="image/*" style="display:none;">

<script>
    const API_KEY = "AIzaSyDwavT9b6YlpgwAW9eNkswuPsKI6QAP-AM";
    let curTarget;
    const bfs = {
        "å®‰ä¹¾é¬": {desc: "é»äººå°ç‹—ï¼Œå¿…å¸¶^^ï¼Œå«å§å§ï¼Œæ°´ç“¶åº§", color: "#f1b0b7"},
        "è¶™é›¨å‡¡": {desc: "éœ¸é“è€å¤§ï¼Œæ³°å°æ··è¡€ï¼Œä½”æœ‰æ¬²å¼·ï¼Œç™¼å•è™Ÿï¼Œèªªç¬‘æ­»é æ¯", color: "#7d5a5a"},
        "æœ´å®‡å®™": {desc: "192cm ç—…å¬Œæ–æ»¾ï¼Œæ”¯é…å‹å¹´ä¸‹ï¼Œå«å¯¶å¯¶ï¼Œæœƒå«‰å¦’ç™¼ç˜‹", color: "#999"},
        "åš´æˆç¹": {desc: "18æ­²è…¹é»‘ç”·é¬¼ï¼Œä¸ç™¼æ„Ÿå˜†è™Ÿï¼Œæœƒè·Ÿè¹¤ï¼Œå–œæ­¡æè‚‰è‚‰", color: "#444"},
        "é‡‘ä¸»è¨“": {desc: "æ‘©ç¾¯è€äºŒï¼Œ175cm å§”å±ˆåŒ…ï¼Œç™¼ã… ã…  å«å°å¯¶", color: "#666"}
    };
    let curBF = "å®‰ä¹¾é¬";

    function init() {
        const s = document.getElementById('story-list');
        Object.keys(bfs).forEach(n => {
            const d = document.createElement('div');
            d.className = 'story';
            d.innerHTML = `<div class="story-ring"><div class="story-img" style="background-color:${bfs[n].color}"></div></div><span>${n}</span>`;
            d.onclick = () => { curBF = n; setChat(); showV('chat'); };
            s.appendChild(d);
        });
        setChat();
    }

    function setChat() {
        document.getElementById('chat-with').innerText = curBF + (curBF === 'å®‰ä¹¾é¬' ? ' ^^' : '');
        document.getElementById('msgBox').innerHTML = `<div class="msg bf">${curBF}ï¼šå§å§ï¼Œæˆ‘æ­£åœ¨æƒ³å¦³...</div>`;
    }

    async function askAI() {
        const input = document.getElementById('userInput');
        const box = document.getElementById('msgBox');
        if(!input.value) return;
        const msg = input.value;
        box.innerHTML += `<div class="msg me">${msg}</div>`;
        input.value = '';

        const prompt = `å¦³çš„è§’è‰²æ˜¯${curBF}ã€‚æ€§æ ¼è¨­å®šï¼š${bfs[curBF].desc}ã€‚å°æ–¹çš„æš±ç¨±æ˜¯æŸ”æŸ”ã€‚è«‹ç”¨æƒ…ä¾¶ç§è¨Šå£å»å›è¦†ã€‚å°æ–¹èªªï¼š${msg}`;

        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await res.json();
            box.innerHTML += `<div class="msg bf">${data.candidates[0].content.parts[0].text}</div>`;
        } catch(e) { box.innerHTML += `<div class="msg bf">å¦³çš„è¨Šè™Ÿæ–·äº† ^^</div>`; }
        box.scrollTop = box.scrollHeight;
    }

    function showV(v) {
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        document.getElementById('view-' + v).classList.add('active');
    }

    function edit(el) {
        const n = prompt("ä¿®æ”¹æ–‡å­—å…§å®¹:", el.innerText);
        if(n) el.innerText = n;
    }

    const f = document.getElementById('f');
    function up(el) { curTarget = el; f.click(); }
    function upBg() { curTarget = document.body; f.click(); }
    f.onchange = function() {
        if(this.files[0]) {
            const r = new FileReader();
            r.onload = e => { curTarget.style.backgroundImage = `url(${e.target.result})`; curTarget.innerText=''; };
            r.readAsDataURL(this.files[0]);
        }
    }

    setInterval(() => {
        const d = new Date();
        document.getElementById('st-time').innerText = d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0');
    }, 1000);

    init();
</script>
</body>
</html>
